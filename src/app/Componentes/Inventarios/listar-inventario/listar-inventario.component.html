<div class="container mt-5">
  <h2>Inventario de Equipos</h2>
  <button class="btn btn-primary mb-3" (click)="openModal('add')">Agregar Equipo</button>

  <div class="table-responsive">
    <table class="table table-striped table-bordered table-sm">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Nombre del Equipo</th>
          <th scope="col">Ubicación</th>
          <th scope="col">Cantidad Disponible</th>
          <th scope="col">Costo</th>
          <th scope="col">Fecha de Adquisición</th>
          <th scope="col">Observaciones</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let inventario of inventarios">
          <th scope="row">{{ inventario.id }}</th>
          <td>{{ inventario.equipo.nombre }}</td>
          <td>{{ inventario.equipo.ubicacion }}</td>
          <td>{{ inventario.cantidadDisponible }}</td>
          <td>{{ inventario.costo }}</td>
          <td>{{ inventario.fechaAdquisicion }}</td>
          <td>{{ inventario.observaciones }}</td>
          <td>
            <button class="btn btn-sm btn-primary" (click)="openModal('edit', inventario)">Editar</button>
            <button class="btn btn-sm btn-danger" (click)="deleteInventario(inventario.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <p *ngIf="!inventarios || inventarios.length === 0">Cargando inventarios...</p>

  <!-- Modal -->
  <div *ngIf="isModalOpen" class="modal-backdrop">
    <div class="modal-content">
      <h3>{{ modalMode === 'add' ? 'Agregar Inventario' : 'Editar Inventario' }}</h3>
      <form (submit)="saveInventario()">
        <div class="form-group">
          <label>Nombre del Equipo:</label>
          <input [(ngModel)]="currentInventario.equipo.nombre" name="nombre" class="form-control" required />
        </div>
        <div class="form-group">
          <label>Ubicación:</label>
          <input [(ngModel)]="currentInventario.equipo.ubicacion" name="ubicacion" class="form-control" required />
        </div>
        <div class="form-group">
          <label>Cantidad Disponible:</label>
          <input type="number" [(ngModel)]="currentInventario.cantidadDisponible" name="cantidadDisponible" class="form-control" required />
        </div>
        <div class="form-group">
          <label>Costo:</label>
          <input type="number" [(ngModel)]="currentInventario.costo" name="costo" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-success">{{ modalMode === 'add' ? 'Agregar' : 'Guardar' }}</button>
        <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancelar</button>
      </form>
    </div>
  </div>
</div>
